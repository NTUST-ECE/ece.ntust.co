(function(){var e,t,i,n,a,o,r,l,s;console.log("hi"),e=941,this.waitForFinalEvent=function(){var e;return e={},function(t,i,n){n||(n="Don't call this twice without a uniqueId"),e[n]&&clearTimeout(e[n]),e[n]=setTimeout(t,i)}}(),s=function(e){var t,i,n,a;return"function"==typeof(i=$(".hero .item:nth-child("+e+")")).css&&i.css("opacity","0"),"function"==typeof(n=$(".hero .item:nth-child("+e+")")).css&&n.css("display","block"),t="function"==typeof(a=$(".hero .item:nth-child("+e+")")).attr?a.attr("data-link"):void 0,""!==t?($("#hero-trigger").attr("href",t),$("#hero-trigger").attr("target","_blank")):($("#hero-trigger").attr("href","#"),$("#hero-trigger").attr("target","")),setTimeout(function(){var t;return"function"==typeof(t=$(".hero .item:nth-child("+e+")")).css?t.css("opacity","auto"):void 0},10)},r=function(){var e;return e=$(".vertical-rhythm > p").css("line-height"),e=parseInt(e,10),e&&$(".vertical-rhythm div").baseline(e),e?$(".vertical-rhythm p").baseline(e):void 0},l=function(){var t,i,n,a,o,l,s,h;return t=$(window).height()-$("header").height()-$("footer").height(),l=$(".main-menu").height()+72,l>t&&(t=l),$(".main").css("min-height",t),o=$(".main-menu").offset().top+$(".main-menu").height(),$(".pull-left").each(function(){return $(this).offset().top<o+100?$(this).addClass("not-raised"):$(this).removeClass("not-raised")}),h=0,$(".timeline-articles.auto-label").each(function(){var e,t,i,n,a,o;return h++,$(this).children(".navigator").remove(),$(this).children(".label").remove(),$(this).prepend('<div class="navigator"><ul></ul></div>'),n=$(this).children(".navigator").children("ul"),t=0,o=0,e=new Date,a=new Date,i=0,$(this).children(".article").each(function(){var r,l,s,d,c;if(i++,o=t,t=$(this).children(".date").attr("datetime")||$(this).children("a").children(".date").attr("datetime"),e.setTime(Date.parse(t)),a.setTime(Date.parse(o)),0!==o){for(r=e.getFullYear(),s=a.getFullYear(),l=e.getMonth()+1,d=12,c=[];s>=r;){for(r===s&&(d=a.getMonth());d>=l;)(1===l||7===l)&&($(this).before('<div id="timeline-'+h+"-"+r+"-"+l+'" class="label">'+r+"/"+l+"</div>"),n.children(".link-to-"+i).remove(),n.append('<li class="link-to-'+i+'"><a href="#timeline-'+h+"-"+r+"-"+l+'">'+r+"/"+l+"</a></li>")),l++;l=1,c.push(r++)}return c}})}),$(".timeline-articles .label").each(function(){return $(this).offset().top<o+100?$(this).addClass("not-raised"):$(this).removeClass("not-raised")}),$(window).width()>e-30&&$(window).bind("scroll",function(){return $(window).width()>e-30?$(".timeline-articles.auto-label").each(function(){var e,t,i,n,a,r,l,s,h;return i=$(this).children(".navigator"),l=$(this).offset().top,a=$(this).offset().top+$(this).height(),$(document).scrollTop()>o+520&&$(document).scrollTop()>l&&$(document).scrollTop()<a?(i.addClass("show"),i.children("ul").children("li.active")[0]?(t=i.children("ul").children("li.active"),e=t.index(),$(document).scrollTop()>(null!=(s=$(t.children("a").attr("href")).offset())?s.top:void 0)-120?(n=i.children("ul").children("li:nth-of-type("+(e+2)+")"),$(document).scrollTop()>(null!=(h=$(n.children("a").attr("href")).offset())?h.top:void 0)-120?(t.removeClass("active"),n.addClass("active")):void 0):(r=i.children("ul").children("li:nth-of-type("+e+")"),console.log(r),t.removeClass("active"),r.addClass("active"))):i.children("ul").children("li").each(function(){var e;return $(document).scrollTop()>(null!=(e=$($(this).children("a").attr("href")).offset())?e.top:void 0)-120?(i.children("ul").children("li").removeClass("active"),$(this).addClass("active")):void 0})):i.removeClass("show")}):void 0}),r(),$(".main p:has(img), .main div:has(img)").each(function(){return $(this).children("img")[0]?$(this).addClass("img"):void 0}),!Modernizr.cssvwunit,a=document.getElementById("js-css"),(null!=a?a.parentNode:void 0)&&a.parentNode.removeChild(a),i="body.nav-open nav.main-menu { max-height: "+($(".main-menu ul").height()+30)+"px !important; } ",i+="body.nav-open nav.main-menu > h1 { transform: translateY("+($(".main-menu li.active").offset().top-($("nav.main-menu > h1").height()-$(".main-menu li.active").height())/2)+"px); -o-transform: translateY("+($(".main-menu li.active").offset().top-($("nav.main-menu > h1").height()-$(".main-menu li.active").height())/2)+"px); -ms-transform: translateY("+($(".main-menu li.active").offset().top-($("nav.main-menu > h1").height()-$(".main-menu li.active").height())/2)+"px); -moz-transform: translateY("+($(".main-menu li.active").offset().top-($("nav.main-menu > h1").height()-$(".main-menu li.active").height())/2)+"px); -webkit-transform: translateY("+($(".main-menu li.active").offset().top-($("nav.main-menu > h1").height()-$(".main-menu li.active").height())/2)+"px); !important; } ",n=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style"),s.type="text/css",s.id="js-css",s.styleSheet?s.styleSheet.cssText=i:s.appendChild(document.createTextNode(i)),n.appendChild(s),$("a[href*=#]:not([href=#])").click(function(){var e;return location.pathname.replace(/^\//,"")===this.pathname.replace(/^\//,"")&&location.hostname===this.hostname&&(e=$(this.hash),e=e.length?e:$("[name="+this.hash.slice(1)+"]"),e.length)?($("html,body").animate({scrollTop:e.offset().top-18},1e3),!1):void 0})},l(),$("nav > h1").click(function(){return $("nav > h1").hasClass("disabled")?void 0:($("body").hasClass("nav-open")?($("body").removeClass("nav-open"),$("nav > h1").addClass("disabled")):($("body").addClass("nav-open"),$("nav > h1").addClass("disabled"),$("body.nav-open .main").click(function(){return $("body").removeClass("nav-open")})),setTimeout(function(){return $("nav > h1").removeClass("disabled")},1200))}),window.chrome&&(t=!0,$("body").addClass("chrome")),Modernizr.touch?(a=!0,$("body").addClass("touch")):$("body").addClass("non-touch"),navigator.platform.toUpperCase().indexOf("MAC")>=0&&(n=!0,$("body").addClass("mac")),navigator.platform.match(/(iPhone|iPod|iPad)/i)&&(i=!0,$("body").addClass("ios")),navigator.appVersion.match(/(Win)/i)&&(o=!0,$("body").addClass("windows")),$(document).ready(function(){var e,t;return t=i?5e3:0,$(".lazyload").show(),$("img").lazyload({effect:"fadeIn",threshold:t,failure_limit:10}),e=$(".hero .item"),s(parseInt(1e4*Math.random()%e.length+1)),$("code").each(function(){return $(this).html($(this).html().replace(/\n/g,"<br />"))})}),$(window).load(function(){return l()}),$(window).resize(function(){return waitForFinalEvent(function(){return l()},500,"winRz")})}).call(this);